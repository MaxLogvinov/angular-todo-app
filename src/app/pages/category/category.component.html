<div class="category-page">
  <header class="page-header">
    <p-button icon="pi pi-arrow-left" label="–ù–∞–∑–∞–¥" [text]="true" routerLink="/tasks" />
    <h1>üìÅ –ö–∞—Ç–µ–≥–æ—Ä–∏—è: {{ category() | categoryLabel }}</h1>
    <p>–ù–∞–π–¥–µ–Ω–æ –∑–∞–¥–∞—á: {{ filteredTasks().length }}</p>
  </header>

  <p-table
    [value]="filteredTasks()"
    styleClass="p-datatable-striped"
  >
    <ng-template pTemplate="header">
      <tr>
        <th>–°—Ç–∞—Ç—É—Å</th>
        <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
        <th>–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç</th>
        <th>–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è</th>
        <th>–î–µ–π—Å—Ç–≤–∏—è</th>
      </tr>
    </ng-template>

    <ng-template pTemplate="body" let-task>
      <tr [class.completed-row]="task.completed">
        <td>
          <p-button
            [icon]="task.completed ? 'pi pi-check-circle' : 'pi pi-circle'"
            [rounded]="true"
            [text]="true"
            [severity]="task.completed ? 'success' : 'secondary'"
            (click)="toggleComplete(task.id)"
          />
        </td>
        <td [class.completed-text]="task.completed">
          {{ task.title }}
        </td>
        <td>
          <p-tag
            [value]="task.priority | priorityLabel"
            [severity]="task.priority | prioritySeverity"
          />
        </td>
        <td>{{ task.createdAt | date: 'dd.MM.yyyy HH:mm' }}</td>
        <td>
          <p-button
            icon="pi pi-trash"
            [rounded]="true"
            [text]="true"
            severity="danger"
            (click)="deleteTask(task.id)"
          />
        </td>
      </tr>
    </ng-template>

    <ng-template pTemplate="emptymessage">
      <tr>
        <td colspan="5" class="empty-message">–í —ç—Ç–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∑–∞–¥–∞—á –Ω–µ—Ç üì≠</td>
      </tr>
    </ng-template>
  </p-table>
</div>
